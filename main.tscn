[gd_scene load_steps=34 format=3 uid="uid://c26t20oe0kecy"]

[ext_resource type="Script" path="res://main.gd" id="1_gwmyc"]
[ext_resource type="PackedScene" uid="uid://bpdj5njb8nhot" path="res://addons/godot-xr-tools/hands/scenes/highpoly/left_fullglove_hand.tscn" id="2_y0yj3"]
[ext_resource type="PackedScene" uid="uid://d1tl07geqm5xq" path="res://addons/godot-xr-tools/hands/scenes/highpoly/right_fullglove_hand.tscn" id="3_dt7cu"]
[ext_resource type="Script" path="res://CustomBehaviors/movement_grapple.gd" id="4_asgik"]
[ext_resource type="PackedScene" uid="uid://b6bk2pj8vbj28" path="res://addons/godot-xr-tools/functions/movement_turn.tscn" id="4_qos05"]
[ext_resource type="PackedScene" uid="uid://cqhw276realc" path="res://addons/godot-xr-tools/functions/function_pointer.tscn" id="5_03cjs"]
[ext_resource type="Material" uid="uid://bwwr74srt7r85" path="res://addons/godot-xr-tools/materials/pointer.tres" id="5_ef2dy"]
[ext_resource type="Texture2D" uid="uid://biugmgasrshjb" path="res://Valve_1m x 1m.png" id="5_wpjj5"]
[ext_resource type="PackedScene" uid="uid://bl2nuu3qhlb5k" path="res://addons/godot-xr-tools/functions/movement_direct.tscn" id="5_xvi8n"]
[ext_resource type="PackedScene" uid="uid://diyu06cw06syv" path="res://addons/godot-xr-tools/player/player_body.tscn" id="7_0g1nu"]
[ext_resource type="PackedScene" uid="uid://c2q5phg8w08o" path="res://addons/godot-xr-tools/functions/movement_jump.tscn" id="9_7x7yy"]

[sub_resource type="BoxMesh" id="BoxMesh_qy2ad"]
resource_local_to_scene = true
size = Vector3(0.05, 0.05, 0.05)
subdivide_depth = 20

[sub_resource type="GDScript" id="GDScript_yttx2"]
script/source = "extends Node3D


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.
	


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	position = %XROrigin3D.position
"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_g37nn"]

[sub_resource type="Sky" id="Sky_xuoek"]
sky_material = SubResource("ProceduralSkyMaterial_g37nn")

[sub_resource type="Environment" id="Environment_4bpdf"]
background_mode = 2
sky = SubResource("Sky_xuoek")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_thnaj"]
transparency = 1
albedo_color = Color(0.541176, 1, 1, 0.466667)
uv1_scale = Vector3(0.5, 0.5, 0.5)
uv1_offset = Vector3(1, 0, 0)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_55de6"]
material = SubResource("StandardMaterial3D_thnaj")
size = Vector3(30, 60, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_kgfbe"]
size = Vector3(30, 60, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_i1xbn"]
albedo_texture = ExtResource("5_wpjj5")
uv1_scale = Vector3(0.5, 0.5, 0.5)
uv1_offset = Vector3(1, 0, 0)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_6ykg3"]
material = SubResource("StandardMaterial3D_i1xbn")
size = Vector3(60, 60, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_26sa6"]
size = Vector3(60, 60, 1)

[sub_resource type="BoxMesh" id="BoxMesh_r25go"]
material = SubResource("StandardMaterial3D_i1xbn")
size = Vector3(60, 60, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_8vi44"]
size = Vector3(60, 60, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_egiep"]
albedo_texture = ExtResource("5_wpjj5")
uv1_scale = Vector3(10, 10, 10)

[sub_resource type="BoxMesh" id="BoxMesh_cta82"]
material = SubResource("StandardMaterial3D_egiep")
size = Vector3(5, 1, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_lbhyh"]
size = Vector3(5, 1, 5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_05w0s"]
albedo_texture = ExtResource("5_wpjj5")
uv1_scale = Vector3(10, 10, 10)

[sub_resource type="BoxMesh" id="BoxMesh_1tymf"]
material = SubResource("StandardMaterial3D_05w0s")
size = Vector3(15, 1, 15)

[sub_resource type="BoxShape3D" id="BoxShape3D_fjbad"]
size = Vector3(15, 1, 15)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_k3vts"]
albedo_texture = ExtResource("5_wpjj5")
uv1_offset = Vector3(0.5, 0.5, 0.5)
uv1_triplanar = true

[sub_resource type="PlaneMesh" id="PlaneMesh_75d5g"]
material = SubResource("StandardMaterial3D_k3vts")
size = Vector2(60, 60)

[sub_resource type="BoxShape3D" id="BoxShape3D_lerc8"]
size = Vector3(60, 1, 60)

[node name="Main" type="Node3D"]
script = ExtResource("1_gwmyc")

[node name="XROrigin3D" type="XROrigin3D" parent="."]
unique_name_in_owner = true
current = true

[node name="XRCamera3D" type="XRCamera3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.7, 0)

[node name="LeftHand" type="XRController3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, -0.5)
tracker = &"left_hand"

[node name="LeftHand" parent="XROrigin3D/LeftHand" instance=ExtResource("2_y0yj3")]

[node name="MovementDirect" parent="XROrigin3D/LeftHand" instance=ExtResource("5_xvi8n")]
max_speed = 20.0
strafe = true

[node name="FunctionPointer" parent="XROrigin3D/LeftHand" instance=ExtResource("5_03cjs")]
laser_length = 1
show_target = true
distance = 1000.0

[node name="RightHand" type="XRController3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.426367, 1.17134, -0.253401)
tracker = &"right_hand"

[node name="RightHand" parent="XROrigin3D/RightHand" instance=ExtResource("3_dt7cu")]

[node name="FunctionPointer" parent="XROrigin3D/RightHand" instance=ExtResource("5_03cjs")]
laser_length = 1
show_target = true
distance = 1000.0

[node name="MovementGrapple" type="Node3D" parent="XROrigin3D/RightHand" node_paths=PackedStringArray("_line_helper", "_line", "_grapple_raycast", "_grapple_target") groups=["movement_providers"]]
script = ExtResource("4_asgik")
grapple_length = 100000.0
_line_helper = NodePath("LineHelper")
_line = NodePath("LineHelper/Line")
_grapple_raycast = NodePath("Grapple_RayCast")
_grapple_target = NodePath("Grapple_Target")

[node name="Grapple_RayCast" type="RayCast3D" parent="XROrigin3D/RightHand/MovementGrapple"]
collision_mask = 3
debug_shape_custom_color = Color(0.862745, 0.278431, 0.278431, 1)
debug_shape_thickness = 1

[node name="Grapple_Target" type="MeshInstance3D" parent="XROrigin3D/RightHand/MovementGrapple"]
visible = false
mesh = SubResource("BoxMesh_qy2ad")
surface_material_override/0 = ExtResource("5_ef2dy")

[node name="LineHelper" type="Node3D" parent="XROrigin3D/RightHand/MovementGrapple"]

[node name="Line" type="CSGCylinder3D" parent="XROrigin3D/RightHand/MovementGrapple/LineHelper"]
transform = Transform3D(1.91069e-15, 4.37114e-08, 1, 1, -4.37114e-08, 0, 4.37114e-08, 1, -4.37114e-08, 0, 0, 0)
radius = 0.02

[node name="MovementJump" parent="XROrigin3D/RightHand" instance=ExtResource("9_7x7yy")]
jump_button_action = "primary_click"

[node name="MovementTurn" parent="XROrigin3D/RightHand" instance=ExtResource("4_qos05")]
turn_mode = 2
smooth_turn_speed = 4.25

[node name="PlayerBody" parent="XROrigin3D" instance=ExtResource("7_0g1nu")]
player_radius = 0.7

[node name="Stabilizer" type="Node3D" parent="XROrigin3D"]
top_level = true
script = SubResource("GDScript_yttx2")

[node name="CSGTorus3D" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(1000, 0, 0, 0, -4.37114e-05, -1000, 0, 1000, -4.37114e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D2" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(500, -866.025, 3.78552e-05, 0, -4.37114e-05, -1000, 866.025, 500, -2.18557e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D3" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-500, -866.025, 3.78552e-05, -3.55485e-12, -4.37114e-05, -1000, 866.025, -500, 2.18557e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D4" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(866.025, -500, 2.18557e-05, 0, -4.37114e-05, -1000, 500, 866.025, -3.78552e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D5" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(3.05176e-05, -1000, 4.37114e-05, -4.75974e-13, -4.37114e-05, -1000, 1000, 3.05176e-05, -1.81899e-12, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D6" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-866.025, 0, -500, 0, 1000, 0, 500, 0, -866.025, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D7" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(1000, 0, 0, 0, 1000, 0, 0, 0, 1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D8" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(500, -866.025, -8.74228e-05, -866.025, -500, 0, -4.37114e-05, 7.57103e-05, -1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D9" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-500, -866.025, 0.000150996, -866.025, 500, 0, -7.54979e-05, -0.000130766, -1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D10" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(866.025, -500, -8.74228e-05, -500, -866.025, 0, -7.57103e-05, 4.37114e-05, -1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D11" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(4.37114e-05, -1000, 0.000150996, -1000, -4.37114e-05, 0, 6.60024e-12, -0.000150996, -1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D12" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-866.025, -500, 8.74228e-05, -500, 866.025, 0, -7.57103e-05, -4.37114e-05, -1000, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D13" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-7.54979e-05, 6.60024e-12, -1000, -8.74228e-05, -1000, 0, -1000, 8.74228e-05, 7.54979e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D14" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(2.18557e-05, -3.78552e-05, -1000, -866.025, -500, 0, -500, 866.025, -4.37114e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D15" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-2.18557e-05, -3.78552e-05, -1000, -866.025, 500, 0, 500, 866.025, -4.37114e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D16" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(-6.53831e-05, 3.77489e-05, -1000, -500, -866.025, 0, -866.025, 500, 7.54979e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D17" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(1.91069e-12, -4.37114e-05, -1000, -1000, -4.37114e-05, 0, -4.37114e-05, 1000, -4.37114e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="CSGTorus3D18" type="CSGTorus3D" parent="XROrigin3D/Stabilizer"]
transform = Transform3D(6.53831e-05, 3.77489e-05, -1000, -500, 866.025, 0, 866.025, 500, 7.54979e-05, 0, 0, 0)
outer_radius = 0.52
sides = 43

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.938776, 0.344528, 0, -0.344528, 0.938776, 0, 4.04726, 3.14195)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_4bpdf")

[node name="Wall4" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 114.566, 60, 45.832)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Wall4"]
mesh = SubResource("BoxMesh_55de6")
skeleton = NodePath("../../Wall4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall4"]
shape = SubResource("BoxShape3D_kgfbe")

[node name="Wall3" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83.7066, 60, 31.2774)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Wall3"]
mesh = SubResource("BoxMesh_6ykg3")
skeleton = NodePath("../../Wall3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall3"]
shape = SubResource("BoxShape3D_26sa6")

[node name="Wall2" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 30, -29.7298)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Wall2"]
mesh = SubResource("BoxMesh_r25go")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall2"]
shape = SubResource("BoxShape3D_8vi44")

[node name="Wall" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 30, 30)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Wall"]
mesh = SubResource("BoxMesh_r25go")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Wall"]
shape = SubResource("BoxShape3D_8vi44")

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 50, 0)

[node name="SkyCube3" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -26, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube3"]
mesh = SubResource("BoxMesh_cta82")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube3"]
shape = SubResource("BoxShape3D_lbhyh")

[node name="SkyCube2" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube2"]
mesh = SubResource("BoxMesh_cta82")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube2"]
shape = SubResource("BoxShape3D_lbhyh")

[node name="SkyCube" type="StaticBody3D" parent="Node3D"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube"]
mesh = SubResource("BoxMesh_cta82")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube"]
shape = SubResource("BoxShape3D_lbhyh")

[node name="SkyCube4" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 57.4438, -50.5757, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube4"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube4"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube5" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 92.3164, -50.5757, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube5"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube5"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube6" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 123.781, -50.5757, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube6"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube6"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube7" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 57.4438, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube7"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube7"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube8" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 92.3164, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube8"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube8"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube9" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 123.781, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube9"]
mesh = SubResource("BoxMesh_1tymf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube9"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube10" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 129.935, -50.5757, 49.9371)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube10"]
mesh = SubResource("BoxMesh_1tymf")
skeleton = NodePath("../../SkyCube10")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube10"]
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube11" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 129.935, 0, 49.9371)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube11"]
mesh = SubResource("BoxMesh_1tymf")
skeleton = NodePath("../../SkyCube10")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube11"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.173492, 0.0418167, 0.0677872)
shape = SubResource("BoxShape3D_fjbad")

[node name="SkyCube12" type="StaticBody3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 89.522, 0, 56.9131)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D/SkyCube12"]
mesh = SubResource("BoxMesh_1tymf")
skeleton = NodePath("../../SkyCube10")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/SkyCube12"]
shape = SubResource("BoxShape3D_fjbad")

[node name="Floor" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
mesh = SubResource("PlaneMesh_75d5g")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("BoxShape3D_lerc8")
